<ion-header>
  <ion-navbar>
    <ion-title>Editing</ion-title>
  </ion-navbar>
</ion-header>
<ion-content>
  <ion-item>
    <a href="{{'footer-template' | wikiUrl}}">
      GitHub
    </a>
  </ion-item>
  <ion-item>
    <ion-label text-wrap>
      Setting footer template.
    </ion-label>
  </ion-item>
  <ion-item>
    <ion-label>Port</ion-label>
    <ionic-selectable item-content #portComponent [(ngModel)]="port"
      itemValueField="id" itemTextField="name" footerValueField="country.id"
      footerTextField="country.name" [items]="ports" [canSearch]="false"
      [isMultiple]="true" [canAddItem]="true" [canSaveItem]="true"
      [canClear]="true" (onSaveItem)="onSavePort($event)"
      groupValueField="country.id" groupTextField="country.name">
      <ng-template ionicSelectableAddItemTemplate let-port="item"
        let-isAdd="isAdd">
        <form [formGroup]="portForm">
          <ion-list>
            <ion-item-divider>
              {{isAdd ? 'Add' : 'Edit'}} Port
            </ion-item-divider>
            <ion-item>
              <ion-label>Name</ion-label>
              <ion-input type="text" formControlName="portName"
                autocorrect="off" autocapitalize="none">
              </ion-input>
            </ion-item>
            <ion-item>
              <ion-label>Country</ion-label>
              <ionic-selectable item-content formControlName="portCountry"
                itemValueField="id" itemTextField="name" [items]="countries">
              </ionic-selectable>
            </ion-item>
          </ion-list>
        </form>
        <ion-footer>
          <ion-toolbar>
            <ion-row>
              <ion-col>
                <button ion-button full
                  (click)="portComponent.hideAddItemTemplate()">
                  Cancel
                </button>
              </ion-col>
              <ion-col>
                <button ion-button full
                  (click)="isAdd ? addPort() : savePort(port)"
                  [disabled]="!portForm.valid">
                  {{isAdd ? 'Add' : 'Save'}}
                </button>
              </ion-col>
            </ion-row>
          </ion-toolbar>
        </ion-footer>
      </ng-template>
      <ng-template ionicSelectableFooterTemplate>
        <ion-toolbar>
          <ion-row>
            <ion-col *ngIf="portComponent.canClear">
              <button ion-button full (click)="clear()"
                [disabled]="!portComponent.itemsToConfirm.length">
                {{portComponent.clearButtonText}}
              </button>
            </ion-col>
            <ion-col>
              <button ion-button full (click)="toggleItems()">
                {{portComponent.itemsToConfirm.length ? 'Deselect' : 'Select'}}
                All
              </button>
            </ion-col>
            <ion-col *ngIf="portComponent.canAddItem">
              <button ion-button full (click)="onAddPort()">
                {{portComponent.addButtonText}}
              </button>
            </ion-col>
            <ion-col>
              <button ion-button full (click)="confirm()">
                {{portComponent.confirmButtonText}}
              </button>
            </ion-col>
          </ion-row>
        </ion-toolbar>
      </ng-template>
    </ionic-selectable>
  </ion-item>
</ion-content>
